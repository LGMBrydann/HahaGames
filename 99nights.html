<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>99 Nights</title>
<style>
  body, html { margin:0; padding:0; overflow:hidden; background:#000; }
  #loading-cover { display:flex; align-items:center; justify-content:center; width:100vw; height:100vh; background:#111; position:absolute; z-index:1000; }
  #unity-canvas { width:100vw; height:100vh; display:block; }
</style>
</head>
<body>
<div id="loading-cover"><div class="spinner"></div></div>
<canvas id="unity-canvas"></canvas>

<script>
const canvas = document.getElementById('unity-canvas');
const loadingCover = document.getElementById('loading-cover');

async function loadParts(parts) {
  const buffers = [];
  for(const url of parts){
    const resp = await fetch(url);
    const buf = await resp.arrayBuffer();
    buffers.push(buf);
  }
  const totalLength = buffers.reduce((a,b)=>a+b.byteLength,0);
  const combined = new Uint8Array(totalLength);
  let offset=0;
  for(const buf of buffers){ combined.set(new Uint8Array(buf), offset); offset+=buf.byteLength; }
  return URL.createObjectURL(new Blob([combined]));
}

async function startGame() {
  const dataUrl = await loadParts([
    'https://cdn.jsdelivr.net/gh/bubbls/99itf@main/Build/Build.data.br.part0',
    'https://cdn.jsdelivr.net/gh/bubbls/99itf@main/Build/Build.data.br.part1',
    'https://cdn.jsdelivr.net/gh/bubbls/99itf@main/Build/Build.data.br.part2'
  ]);
  const wasmUrl = await loadParts([
    'https://cdn.jsdelivr.net/gh/bubbls/99itf@main/Build/Build.wasm.br.part0',
    'https://cdn.jsdelivr.net/gh/bubbls/99itf@main/Build/Build.wasm.br.part1'
  ]);

  // Unity loader code here
  loadingCover.style.display='none';
}
window.addEventListener('load', startGame);
</script>
</body>
</html>
